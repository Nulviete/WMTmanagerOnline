import{Q as b,a as Q}from"./QForm.8fc05feb.js";import{Q as n}from"./QSelect.92bfe2dd.js";import{G as q,r as o,J as w,K as g,L as f,O as u,M as a,Y as U,aB as D,H as _}from"./index.181651b6.js";import{Q as B}from"./QPage.fffa2538.js";import{u as O}from"./use-quasar.e573c060.js";import"./use-key-composition.19db8c27.js";import"./uid.42677368.js";import"./scroll.76abc915.js";const A=u("h2",{class:"q-mx-auto text-center"},"Add new Membo :-)",-1),J={style:{width:"700px"},class:"q-mx-auto"},N=u("div",{class:"h3-text q-pt-md"},"Start of cooperation (Only for volunteers)",-1),Y={class:"row"},K={__name:"AddMember",setup(k){const V=q(),y=O(),m=new Date,r=m.getFullYear(),i=o(r),M=m.getMonth(),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Sep","Oct","Nov","Dec"],c=o([]);for(let s=r-5;s<r+5;s++)c.value.push(s);const d=o(p[M]),S=o([{label:"Poland",value:"pl"},{label:"Ukraine",value:"ua"},{label:"Czech republic",value:"cz"},{label:"Spain",value:"sp"},{label:"Italy",value:"it"},{label:"Morocco",value:"mo"}]),h=o([{label:"Root Member"},{label:"Volunteer"}]),e=o({name:o(""),country:o(null),dateSince:o(""),position:o("Volunteer"),positionDescription:o("")}),v=o(!1);async function x(){if(e.value.country===null)return alert("country must be selected");{e.value.dateSince=d.value+" of "+i.value,e.value.country=e.value.country.value,console.log(e.value);const{data:s,error:l}=await _.from("members").insert(e.value).select();s&&(y.notify("Member has been successfully added"),setTimeout(()=>V.push({path:"/Members"}),1500)),l&&alert("error")}}return(s,l)=>(w(),g(B,{padding:""},{default:f(()=>[A,u("div",J,[a(Q,{action:"",onSubmit:D(x,["prevent"]),class:"q-gutter-xs"},{default:f(()=>[a(b,{filled:"",modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.name=t),label:"Name",dense:v.value,required:""},null,8,["modelValue","dense"]),a(n,{filled:"",modelValue:e.value.country,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.country=t),options:S.value,label:"Country"},null,8,["modelValue","options"]),a(n,{filled:"",modelValue:e.value.position,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.position=t),options:h.value,label:"Position"},null,8,["modelValue","options"]),a(b,{filled:"",modelValue:e.value.positionDescription,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.positionDescription=t),label:"Description of position",dense:v.value,class:"",required:""},null,8,["modelValue","dense"]),N,u("div",Y,[a(n,{filled:"",modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=t=>d.value=t),options:p,label:"Month",class:"col-2"},null,8,["modelValue"]),a(n,{filled:"",modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=t=>i.value=t),options:c.value,label:"Year",class:"col-2"},null,8,["modelValue","options"])]),a(U,{class:"glossy q-mt-md",color:"teal",label:"Add Membo",type:"submit"})]),_:1})])]),_:1}))}};export{K as default};
