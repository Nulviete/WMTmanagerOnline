import{c as k,a as x,h as Q,b as P,aw as K,ax as U,k as Y,ay as F,f as G,_ as H,r as u,G as J,J as V,K as O,L as n,H as j,az as R,P as g,M as t,Z as C,aA as B,Q as _,aB as $,S as Z,O as q,T as b,a8 as W,U as X,N as ee,w as D,aC as ae,aD as te}from"./index.54b6f0d8.js";import{g as oe,b as le,Q as A,d as re}from"./QSelect.d3342a9a.js";import{Q as se,a as v,b as ne}from"./QTable.c09dacf5.js";import{i as de,j as ce}from"./use-key-composition.5f80a910.js";import{Q as ue}from"./QPage.1b4ea7c2.js";import"./scroll.29190ff5.js";import"./QCheckbox.c2627c58.js";import"./uid.42677368.js";var ie=k({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const r=x(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>Q(e.tag,{class:r.value},P(o.default))}}),pe=k({name:"QCardActions",props:{...K,vertical:Boolean},setup(e,{slots:o}){const r=U(e),l=x(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>Q("div",{class:l.value},P(o.default))}}),fe=k({name:"QCard",props:{...de,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:r}}=Y(),l=ce(e,r),i=x(()=>"q-card"+(l.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>Q(e.tag,{class:i.value},P(o.default))}});function N(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var z=F({name:"close-popup",beforeMount(e,{value:o}){const r={depth:N(o),handler(l){r.depth!==0&&setTimeout(()=>{const i=oe(e);i!==void 0&&le(i,l,r.depth)})},handlerKey(l){G(l,13)===!0&&r.handler(l)}};e.__qclosepopup=r,e.addEventListener("click",r.handler),e.addEventListener("keyup",r.handlerKey)},updated(e,{value:o,oldValue:r}){o!==r&&(e.__qclosepopup.depth=N(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});const S=e=>(ae("data-v-5aa7691e"),e=e(),te(),e),me={class:"row"},ve=S(()=>g("h5",{style:{padding:"0"}},"Projects",-1)),ye=S(()=>g("p",{class:"self-center",style:{"padding-left":"80px","padding-right":"20px"}},"Filters:",-1)),_e={key:0,class:"q-pa-md"},ge=S(()=>g("span",{class:"q-ml-sm"},"Are you sure you want to delete the project?",-1)),he={__name:"ProjectsManager",setup(e){const o=u(null),r=J(),l=u(null),i=u(null),E=u(!1),y=u([]),h=u([]),f=u(""),m=u("");(async()=>{const{data:d}=await j.from("projects").select();l.value=d,E.value=!0;for(let a=0;a<l.value.length;a++)y.value.includes(l.value[a].year)||y.value.push(l.value[a].year),h.value.includes(l.value[a].category)||h.value.push(l.value[a].category);y.value.sort(function(a,c){return c-a});const s=(a,c)=>a===""&&c===""?l.value:a===""&&c!==""?l.value.filter(p=>p.category===c):a!==""&&c===""?l.value.filter(p=>p.year===a):l.value.filter(p=>p.year===a&&p.category===c);R(()=>{i.value=s(f.value,m.value)})})();const I=[{name:"name",required:!0,label:"Name of Project",align:"left",field:d=>d.name,sortable:!0},{name:"year",label:"Year",align:"left",field:"year",format:d=>`${d}`,sortable:!0},{name:"category",label:"Category",align:"left",field:"category",format:d=>`${d}`,sortable:!0},{name:"edit",label:"Edit",align:"left"},{name:"delete",label:"Delete",align:"left"}],T=i,L=d=>{r.push({path:"/Projects/"+d})},w=u(!1),M=async d=>{const{error:s}=await j.from("projects").delete().eq("id",d);s?console.log(s):r.go()};return(d,s)=>(V(),O(ue,{padding:""},{default:n(()=>[g("div",me,[ve,t(C,{round:"",color:"primary",icon:"add",class:"self-center q-mx-sm",to:"Projects/AddProject"}),ye,t(A,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),options:y.value,label:"Year",style:{width:"180px"},class:"q-pa-md self-center"},B({_:2},[f.value?{name:"append",fn:n(()=>[t(_,{name:"cancel",onClick:s[0]||(s[0]=$(a=>f.value="",["stop","prevent"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options"]),t(A,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=a=>m.value=a),options:h.value,label:"Category",style:{width:"200px"},class:"q-pa-md self-center"},B({_:2},[m.value?{name:"append",fn:n(()=>[t(_,{name:"cancel",onClick:s[2]||(s[2]=$(a=>m.value="",["stop","prevent"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options"])]),i.value?(V(),Z("div",_e,[t(ne,{rows:W(T),columns:I,"row-key":"name","rows-per-page-options":[10,20],style:{width:"600px"}},{body:n(a=>[t(se,{props:a},{default:n(()=>[t(v,{key:"name"},{default:n(()=>[q(b(a.row.name),1)]),_:2},1024),t(v,{key:"year"},{default:n(()=>[q(b(a.row.year),1)]),_:2},1024),t(v,{key:"category"},{default:n(()=>[q(b(a.row.category),1)]),_:2},1024),t(v,{key:"edit"},{default:n(()=>[t(_,{name:"mdi-pencil",size:"sm",onClick:c=>L(a.row.name),class:"edit"},null,8,["onClick"])]),_:2},1024),t(v,{key:"delete"},{default:n(()=>[t(_,{name:"mdi-delete",size:"sm",onClick:c=>{o.value=a.row.id,w.value=!0},class:"edit"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])])):X("",!0),t(re,{modelValue:w.value,"onUpdate:modelValue":s[5]||(s[5]=a=>w.value=a),persistent:""},{default:n(()=>[t(fe,null,{default:n(()=>[t(ie,{class:"row items-center"},{default:n(()=>[t(ee,{icon:"signal_wifi_off",color:"primary","text-color":"white"}),ge]),_:1}),t(pe,{align:"right"},{default:n(()=>[D(t(C,{flat:"",label:"Cancel",color:"primary"},null,512),[[z]]),D(t(C,{flat:"",label:"Delete",color:"primary",onClick:s[4]||(s[4]=a=>M(o.value))},null,512),[[z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Ve=H(he,[["__scopeId","data-v-5aa7691e"]]);export{Ve as default};
